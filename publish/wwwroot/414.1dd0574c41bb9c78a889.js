"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[414],{1414:(F,p,s)=>{s.r(p),s.d(p,{CheckoutModule:()=>T});var e=s(3018),a=s(15),d=s(8583);function g(n,r){1&n&&(e.TgZ(0,"button",5),e._uU(1,"View your orders"),e.qZA())}let h=(()=>{class n{constructor(t){this.router=t}ngOnInit(){const t=this.router.getCurrentNavigation(),o=t&&t.extras&&t.extras.state;o&&(this.order=o)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-checkout-success"]],decls:15,vars:1,consts:[[1,"service-info"],[1,"success-wrapper"],[1,"cover"],[1,"flex-div"],["routerLink","/orders",4,"ngIf"],["routerLink","/orders"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"p"),e._uU(2,"Standard delivery 2 days"),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Return within 30 days"),e.qZA(),e.TgZ(5,"p"),e._uU(6,"Standard Shipping 2.99$"),e.qZA(),e.qZA(),e.TgZ(7,"div",1),e._UZ(8,"div",2),e.TgZ(9,"div",3),e.TgZ(10,"h2"),e._uU(11,"Thank you for your order!"),e.qZA(),e.TgZ(12,"p"),e._uU(13,"You will receive a confirmation email shortly"),e.qZA(),e.YNc(14,g,2,0,"button",4),e.qZA(),e.qZA()),2&t&&(e.xp6(14),e.Q6J("ngIf",!o.order))},directives:[d.O5,a.rH],styles:[".success-wrapper[_ngcontent-%COMP%]{height:80vh;width:100%;display:flex;margin-bottom:0}.success-wrapper[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{background-image:linear-gradient(rgba(0,0,0,.233) 70%,transparent),url(nike-promo.65dfdd5e4a95badcd5ef.jpg);background-size:cover;background-position:center;height:80vh;width:50%}.success-wrapper[_ngcontent-%COMP%]   .flex-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-top:8rem;width:50%;height:80vh}.success-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:5rem}.success-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:1rem 0}.success-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:1rem 2rem;border:none}.service-info[_ngcontent-%COMP%]{display:flex;width:100%;padding:2rem;justify-content:space-around;background-color:#000;margin-top:2rem}.service-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#e0e0e0}@media (max-width: 700px){.cover[_ngcontent-%COMP%], .flex-div[_ngcontent-%COMP%]{width:100%!important}.flex-div[_ngcontent-%COMP%]{position:absolute;background-color:#ffffff94}}"]}),n})();var c=s(665),l=s(4806),m=s(2290),C=s(8745);function f(n,r){1&n&&(e.TgZ(0,"h4"),e._uU(1,"Customer Information"),e.qZA())}function k(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"i",7),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleEdit()}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(2),e.AsE("",t.currentUserAddress.firstName," ",t.currentUserAddress.lastName,""),e.xp6(2),e.Oqu(t.currentUserAddress.street),e.xp6(2),e.AsE("",t.currentUserAddress.postalCode,", ",t.currentUserAddress.city,"")}}function v(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,f,2,0,"h4",3),e.YNc(2,k,8,5,"div",5),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.currentUserAddress),e.xp6(1),e.Q6J("ngIf",t.currentUserAddress)}}function _(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"h4"),e._uU(2,"Shipping Address"),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"label"),e._uU(5,"Name*"),e.qZA(),e._UZ(6,"app-text-inputs",8),e.TgZ(7,"label"),e._uU(8,"Lastname*"),e.qZA(),e._UZ(9,"app-text-inputs",9),e.TgZ(10,"label"),e._uU(11,"Street*"),e.qZA(),e._UZ(12,"app-text-inputs",10),e.TgZ(13,"label"),e._uU(14,"City*"),e.qZA(),e._UZ(15,"app-text-inputs",11),e.TgZ(16,"label"),e._uU(17,"Postal Code*"),e.qZA(),e._UZ(18,"app-text-inputs",12),e.qZA(),e.TgZ(19,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveDefaultAddress()}),e._uU(20," Save as default address "),e.qZA(),e.TgZ(21,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleCancel()}),e._uU(22," Cancel "),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.checkoutForm),e.xp6(6),e.Q6J("label","FirstName"),e.xp6(3),e.Q6J("label","LastName"),e.xp6(3),e.Q6J("label","Street"),e.xp6(3),e.Q6J("label","City"),e.xp6(3),e.Q6J("label","PostalCode"),e.xp6(1),e.Q6J("disabled",!t.checkoutForm.get("addressForm").valid||!t.checkoutForm.get("addressForm").dirty),e.xp6(2),e.Q6J("disabled",!t.checkoutForm.get("addressForm").valid)}}let Z=(()=>{class n{constructor(t,o){this.accountService=t,this.toaster=o,this.edit=!1}ngOnInit(){this.loadCurrentUserInfo()}loadCurrentUserInfo(){this.accountService.getUserAddress().subscribe(t=>{this.currentUserAddress=t})}handleEdit(){this.edit=!0}handleCancel(){this.edit=!1}saveDefaultAddress(){this.accountService.updateUserAddress(this.checkoutForm.get("addressForm").value).subscribe(()=>{this.toaster.success("Address saved!"),this.loadCurrentUserInfo()},t=>{this.toaster.error("Failed saving the address")}),this.edit=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.B),e.Y36(m._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-checkout-address"]],inputs:{checkoutForm:"checkoutForm"},decls:6,vars:3,consts:[[1,"address-container"],[3,"formGroup"],["formGroupName","addressForm"],[4,"ngIf"],[3,"formGroup",4,"ngIf"],["class","currentUserInfo",4,"ngIf"],[1,"currentUserInfo"],[1,"fa","fa-edit",3,"click"],["formControlName","firstName",3,"label"],["formControlName","lastName",3,"label"],["formControlName","street",3,"label"],["formControlName","city",3,"label"],["formControlName","postalCode",3,"label"],[3,"disabled","click"],[1,"cancel",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,v,3,2,"div",3),e.YNc(4,_,23,8,"div",4),e.qZA(),e.qZA(),e._UZ(5,"div"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.checkoutForm),e.xp6(2),e.Q6J("ngIf",!o.edit),e.xp6(1),e.Q6J("ngIf",o.edit||!o.currentUserAddress))},directives:[c.JL,c.sg,c.x0,d.O5,C.x,c.JJ,c.u],styles:[".address-container[_ngcontent-%COMP%]{width:100%;padding:2rem}.address-container[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{background-color:#000;color:#fff}.address-container[_ngcontent-%COMP%]   .currentUserInfo[_ngcontent-%COMP%]{position:relative}.address-container[_ngcontent-%COMP%]   .currentUserInfo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin-bottom:.5rem}.address-container[_ngcontent-%COMP%]   .currentUserInfo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:0;top:0;font-size:1.2rem;cursor:pointer}.address-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:2rem 0}.address-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid black;padding:1rem;width:100%;background:transparent;margin-top:1rem}label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin-top:1rem;display:block}button[_ngcontent-%COMP%]:disabled{cursor:not-allowed}[_nghost-%COMP%]     input{width:100%;border-radius:2px;margin-top:0}"]}),n})();var x=s(6341),O=s(9508),A=s(2340),b=s(1841);let M=(()=>{class n{constructor(t){this.http=t,this.baseUrl=A.N.apiUrl}placeOrder(t){return this.http.post(`${this.baseUrl}orders`,t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(b.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),P=(()=>{class n{constructor(t,o,i,u){this.basketService=t,this.checkoutService=o,this.toastr=i,this.router=u}ngOnInit(){}submitOrder(){const t=this.basketService.getCurrentBasketValue(),o=this.getCreatedOrder(t);this.checkoutService.placeOrder(o).subscribe(i=>{this.toastr.success("Order is successfully created!"),this.basketService.deleteLocalBasket(t.id),this.router.navigate(["checkout/success"],{state:i})},i=>{console.log(i)})}getCreatedOrder(t){return{basketId:t.id,shippingAddress:this.checkoutForm.get("addressForm").value}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O.v),e.Y36(M),e.Y36(m._W),e.Y36(a.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-checkout-payment"]],inputs:{checkoutForm:"checkoutForm"},decls:3,vars:0,consts:[[3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"button",0),e.NdJ("click",function(){return o.submitOrder()}),e._uU(2,"Submit Order "),e.qZA(),e.qZA())},styles:["button[_ngcontent-%COMP%]{width:100%;background-color:#000;border:none;color:#fff;padding:1rem;text-align:center;margin-top:3rem}"]}),n})();const w=[{path:"",component:(()=>{class n{constructor(t,o){this.formBuilder=t,this.accountService=o}ngOnInit(){this.createCheckoutForm(),this.getAddressValues()}createCheckoutForm(){this.checkoutForm=new c.cw({addressForm:new c.cw({firstName:new c.NI("",c.kI.required),lastName:new c.NI("",c.kI.required),street:new c.NI("",c.kI.required),city:new c.NI("",c.kI.required),postalCode:new c.NI("",c.kI.required)}),paymentForm:new c.cw({nameOnCard:new c.NI("",c.kI.required)})})}getAddressValues(){this.accountService.getUserAddress().subscribe(t=>{t&&this.checkoutForm.get("addressForm").patchValue(t)},t=>{console.log(t)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.qu),e.Y36(l.B))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-checkout"]],decls:7,vars:2,consts:[[1,"checkout-page"],[1,"flex-wrapper"],[1,"address",3,"checkoutForm"],[1,"checkout-wrapper"],[3,"checkoutForm"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e._UZ(3,"app-checkout-address",2),e.TgZ(4,"div",3),e._UZ(5,"app-order-total"),e._UZ(6,"app-checkout-payment",4),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("checkoutForm",o.checkoutForm),e.xp6(3),e.Q6J("checkoutForm",o.checkoutForm))},directives:[Z,x.V,P],styles:[".checkout-page[_ngcontent-%COMP%]{width:100%;min-height:100vh;position:relative;display:flex;flex-direction:column}.checkout-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem}.checkout-page[_ngcontent-%COMP%]   .service-info[_ngcontent-%COMP%]{display:flex;width:100%;padding:2rem;justify-content:space-around;background-color:#000;margin-top:2rem}.checkout-page[_ngcontent-%COMP%]   .service-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#e0e0e0}.checkout-page[_ngcontent-%COMP%]   .flex-wrapper[_ngcontent-%COMP%]{display:flex;padding:4rem;justify-content:space-between;width:100%}.checkout-page[_ngcontent-%COMP%]   .flex-wrapper[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{min-width:50%;max-width:100%;padding-bottom:4rem}.checkout-page[_ngcontent-%COMP%]   .checkout-wrapper[_ngcontent-%COMP%]{padding:4rem;display:flex;flex-direction:column;background-color:#fafafa;min-width:35%;max-width:100%}@media (max-width: 900px){.flex-wrapper[_ngcontent-%COMP%]{padding:0!important;flex-direction:column;justify-content:center}.address[_ngcontent-%COMP%], .checkout-wrapper[_ngcontent-%COMP%]{width:100%}}"]}),n})()},{path:"success",component:h}];let y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.Bz.forChild(w)],a.Bz]}),n})();var U=s(9441);let T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,y,U.m]]}),n})()}}]);